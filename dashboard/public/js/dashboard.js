(()=>{"use strict";function e(e,t,n,o,r,a,i,l){var s,d="function"==typeof e?e.options:e;if(t&&(d.render=t,d.staticRenderFns=n,d._compiled=!0),o&&(d.functional=!0),a&&(d._scopeId="data-v-"+a),i?(s=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(i)},d._ssrRegister=s):r&&(s=l?function(){r.call(this,(d.functional?this.parent:this).$root.$options.shadowRoot)}:r),s)if(d.functional){d._injectStyles=s;var c=d.render;d.render=function(e,t){return s.call(t),c(e,t)}}else{var u=d.beforeCreate;d.beforeCreate=u?[].concat(u,s):[s]}return{exports:e,options:d}}const t=e({props:{verifyUrl:{type:String,default:function(){return null},required:!0},settingUrl:{type:String,default:function(){return null},required:!0}},data:function(){return{verified:!0}},mounted:function(){this.verifyLicense()},methods:{verifyLicense:function(){var e=this;axios.get(this.verifyUrl).then((function(t){t.data.error&&(e.verified=!1)})).catch((function(){}))}}},(function(){var e=this,t=e._self._c;return e.verified?e._e():t("div",{staticClass:"note note-warning"},[t("p",[e._v("\n        Your license is invalid, please contact support. If you didn't setup license code, please go to\n        "),t("a",{attrs:{href:e.settingUrl}},[e._v("Settings")]),e._v(" to activate license!\n    ")])])}),[],!1,null,null,null).exports;const n=e({props:{checkUpdateUrl:{type:String,default:function(){return null},required:!0},settingUrl:{type:String,default:function(){return null},required:!0}},data:function(){return{hasNewVersion:!1,message:null}},mounted:function(){this.checkUpdate()},methods:{checkUpdate:function(){var e=this;axios.get(this.checkUpdateUrl).then((function(t){!t.data.error&&t.data.data.has_new_version&&(e.hasNewVersion=!0,e.message=t.data.message)})).catch((function(){}))}}},(function(){var e=this,t=e._self._c;return e.hasNewVersion?t("div",{staticClass:"note note-warning"},[t("p",[e._v(e._s(e.message)+", please go to "),t("a",{attrs:{href:e.settingUrl}},[e._v("System Updater")]),e._v(" to upgrade to the latest version!")])]):e._e()}),[],!1,null,null,null).exports;function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(a=r.key,i=void 0,i=function(e,t){if("object"!==o(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"),"symbol"===o(i)?i:String(i)),r)}var a,i}"undefined"!=typeof vueApp&&vueApp.booting((function(e){e.component("verify-license-component",t),e.component("check-update-component",n)}));var a={},i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,o=[{key:"loadWidget",value:function(t,n,o,r){var i=t.closest(".widget_item"),l=i.attr("id");void 0!==r&&(a[l]=r);var s=i.find("a.collapse-expand");if(!s.length||!s.hasClass("collapse")){Tec.blockUI({target:t,iconOnly:!0,overlayColor:"none"}),void 0!==o&&null!=o||(o={});var d=i.find("select[name=predefined_range]");d.length&&(o.predefined_range=d.val()),$httpClient.makeWithoutErrorHandler().get(n,o).then((function(n){var o=n.data;t.html(o.data),void 0!==r?r():a[l]&&a[l](),0!==t.find(".scroller").length&&Tec.callScroll(t.find(".scroller")),$(".equal-height").equalHeights(),e.initSortable()})).catch((function(e){t.html('<div class="dashboard_widget_msg col-12"><p>'+e.response.data.message+"</p>")})).finally((function(){Tec.unblockUI(t)}))}}},{key:"initSortable",value:function(){if($("#list_widgets").length>0){var e=document.getElementById("list_widgets");Sortable.create(e,{group:"widgets",sort:!0,delay:0,disabled:!1,store:null,animation:150,handle:".portlet-title",ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dataIdAttr:"data-id",forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,scroll:!0,scrollSensitivity:30,scrollSpeed:10,onUpdate:function(){var e=[];$.each($(".widget_item"),(function(t,n){e.push($(n).prop("id"))})),$httpClient.makeWithoutErrorHandler().post(route("dashboard.update_widget_order"),{items:e}).then((function(e){var t=e.data;Tec.showSuccess(t.message)}))}})}}}],(n=[{key:"init",value:function(){var t=$("#list_widgets");$(document).on("click",".portlet > .portlet-title .tools > a.remove",(function(e){e.preventDefault(),$("#hide-widget-confirm-bttn").data("id",$(e.currentTarget).closest(".widget_item").prop("id")),$("#hide_widget_modal").modal("show")})),t.on("click",".page_next, .page_previous",(function(t){t.preventDefault();var n=$(t.currentTarget),o=n.prop("href");o&&e.loadWidget(n.closest(".portlet").find(".portlet-body"),o)})),t.on("change",".number_record .numb",(function(t){t.preventDefault();var n=$(t.currentTarget),o=n.closest(".number_record").find(".numb").val();!isNaN(o)&&o>0?e.loadWidget(n.closest(".portlet").find(".portlet-body"),n.closest(".widget_item").attr("data-url"),{paginate:o}):Tec.showError("Please input a number!")})),t.on("click",".btn_change_paginate",(function(e){e.preventDefault();var t=$(e.currentTarget),n=t.closest(".number_record").find(".numb"),o=parseInt(n.prop("min")||5),r=parseInt(n.prop("max")||100),a=parseInt(n.prop("step")||5),i=parseInt(n.val());t.hasClass("btn_up")?i<r&&(i+=a):t.hasClass("btn_down")&&(i-a>0?i-=a:i=a,i<o&&(i=o)),i!=parseInt(n.val())&&n.val(i).trigger("change")})),$("#hide-widget-confirm-bttn").on("click",(function(e){e.preventDefault();var t=$(e.currentTarget).data("id");$httpClient.makeWithoutErrorHandler().get(route("dashboard.hide_widget",{name:t})).then((function(e){var n=e.data;$("#"+t).fadeOut(),Tec.showSuccess(n.message)})).finally((function(){$("#hide_widget_modal").modal("hide");var t=$(e.currentTarget).closest(".portlet");$(document).hasClass("page-portlet-fullscreen")&&$(document).removeClass("page-portlet-fullscreen"),t.find("[data-bs-toggle=tooltip]").tooltip("destroy"),t.remove()}))})),$(document).on("click",".portlet:not(.widget-load-has-callback) > .portlet-title .tools > a.reload",(function(t){t.preventDefault();var n=$(t.currentTarget);e.loadWidget(n.closest(".portlet").find(".portlet-body"),n.closest(".widget_item").attr("data-url"))})),$(document).on("click",".portlet > .portlet-title .tools > .collapse, .portlet .portlet-title .tools > .expand",(function(t){t.preventDefault();var n=$(t.currentTarget),o=n.closest(".portlet"),r=$.trim(n.data("state"));"expand"===r?(o.find(".portlet-body").removeClass("collapse").addClass("expand"),e.loadWidget(o.find(".portlet-body"),n.closest(".widget_item").attr("data-url"))):o.find(".portlet-body").removeClass("expand").addClass("collapse"),$httpClient.makeWithoutErrorHandler().post(route("dashboard.edit_widget_setting_item"),{name:n.closest(".widget_item").prop("id"),setting_name:"state",setting_value:r}).then((function(){"collapse"===r?(n.data("state","expand"),o.find(".predefined-ranges").addClass("d-none"),o.find("a.reload").addClass("d-none"),o.find("a.fullscreen").addClass("d-none")):(n.data("state","collapse"),o.find(".predefined-ranges").removeClass("d-none"),o.find("a.reload").removeClass("d-none"),o.find("a.fullscreen").removeClass("d-none"))}))})),$(document).on("change",".portlet select[name=predefined_range]",(function(t){t.preventDefault();var n=$(t.currentTarget);e.loadWidget(n.closest(".portlet").find(".portlet-body"),n.closest(".widget_item").attr("data-url"),{changed_predefined_range:1})}));var n=$("#manage_widget_modal");$(document).on("click",".manage-widget",(function(e){e.preventDefault(),n.modal("show")})),n.on("change",".swc_wrap input",(function(e){$(e.currentTarget).closest("section").find("i").toggleClass("widget_none_color")}))}}])&&r(t.prototype,n),o&&r(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();$(document).ready((function(){(new i).init(),window.BDashboard=i}))})();