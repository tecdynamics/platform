(()=>{function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(t,a){for(var n=0;n<a.length;n++){var o=a[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(c=o.key,r=void 0,r=function(t,a){if("object"!==e(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,a||"default");if("object"!==e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===a?String:Number)(t)}(c,"string"),"symbol"===e(r)?r:String(r)),o)}var c,r}!function(e,a){"use strict";var n=function(t,a){var n=t.ajax.params();return n.action=a,n._token=e('meta[name="csrf-token"]').attr("content"),n},o=function(t,a){var n=t+"/export",o=new XMLHttpRequest;o.open("POST",n,!0),o.responseType="arraybuffer",o.onload=function(){if(200===this.status){var e="",t=o.getResponseHeader("Content-Disposition");if(t&&-1!==t.indexOf("attachment")){var a=/filename[^;=\n]*=((['"]).*?\2|[^;\n]*)/.exec(t);null!=a&&a[1]&&(e=a[1].replace(/['"]/g,""))}var n=o.getResponseHeader("Content-Type"),c=new Blob([this.response],{type:n});if(void 0!==window.navigator.msSaveBlob)window.navigator.msSaveBlob(c,e);else{var r=window.URL||window.webkitURL,l=r.createObjectURL(c);if(e){var i=document.createElement("a");void 0===i.download?window.location=l:(i.href=l,i.download=e,document.body.appendChild(i),i.trigger("click"))}else window.location=l;setTimeout((function(){r.revokeObjectURL(l)}),100)}}},o.setRequestHeader("Content-type","application/x-www-form-urlencoded"),o.send(e.param(a))},c=function(t,a){var n=t.ajax.url()||"",o=t.ajax.params();return o.action=a,n.indexOf("?")>-1?n+"&"+e.param(o):n+"?"+e.param(o)};a.ext.buttons.excel={className:"buttons-excel",text:function(e){return'<i class="far fa-file-excel"></i> '+e.i18n("buttons.excel",TecVariables.languages.tables.excel?TecVariables.languages.tables.excel:"Excel")},action:function(e,t){window.location=c(t,"excel")}},a.ext.buttons.postExcel={className:"buttons-excel",text:function(e){return'<i class="far fa-file-excel"></i> '+e.i18n("buttons.excel",TecVariables.languages.tables.excel?TecVariables.languages.tables.excel:"Excel")},action:function(e,t){var a=t.ajax.url()||window.location.href,c=n(t,"excel");o(a,c)}},a.ext.buttons.export={extend:"collection",className:"buttons-export",text:function(e){return'<i class="fa fa-download"></i> '+e.i18n("buttons.export",TecVariables.languages.tables.export?TecVariables.languages.tables.export:"Export")+'&nbsp;<span class="caret"/>'},buttons:["csv","excel"]},a.ext.buttons.csv={className:"buttons-csv",text:function(e){return'<i class="fas fa-file-csv"></i> '+e.i18n("buttons.csv",TecVariables.languages.tables.csv?TecVariables.languages.tables.csv:"CSV")},action:function(e,t){window.location=c(t,"csv")}},a.ext.buttons.postCsv={className:"buttons-csv",text:function(e){return'<i class="fas fa-file-csv"></i> '+e.i18n("buttons.csv",TecVariables.languages.tables.csv?TecVariables.languages.tables.csv:"CSV")},action:function(e,t){var a=t.ajax.url()||window.location.href,c=n(t,"csv");o(a,c)}},a.ext.buttons.pdf={className:"buttons-pdf",text:function(e){return'<i class="far fa-file-pdf"></i> '+e.i18n("buttons.pdf","PDF")},action:function(e,t){window.location=c(t,"pdf")}},a.ext.buttons.postPdf={className:"buttons-pdf",text:function(e){return'<i class="far fa-file-pdf"></i> '+e.i18n("buttons.pdf","PDF")},action:function(e,t){var a=t.ajax.url()||window.location.href,c=n(t,"pdf");o(a,c)}},a.ext.buttons.print={className:"buttons-print",text:function(e){return'<i class="fa fa-print"></i> '+e.i18n("buttons.print",TecVariables.languages.tables.print?TecVariables.languages.tables.print:"Print")},action:function(e,t){window.location=c(t,"print")}},a.ext.buttons.reset={className:"buttons-reset",text:function(e){return'<i class="fa fa-undo"></i> '+e.i18n("buttons.reset",TecVariables.languages.tables.reset?TecVariables.languages.tables.reset:"Reset")},action:function(){e(".table thead input").val("").keyup(),e(".table thead select").val("").change()}},a.ext.buttons.reload={className:"buttons-reload",text:function(e){return'<i class="fas fa-sync"></i> '+e.i18n("buttons.reload",TecVariables.languages.tables.reload?TecVariables.languages.tables.reload:"Reload")},action:function(e,t){t.draw(!1)}},a.ext.buttons.create={className:"buttons-create",text:function(e){return'<i class="fa fa-plus"></i> '+e.i18n("buttons.create","Create")},action:function(){window.location=window.location.href.replace(/\/+$/,"")+"/create"}},void 0!==a.ext.buttons.copyHtml5&&e.extend(a.ext.buttons.copyHtml5,{text:function(e){return'<i class="fa fa-copy"></i> '+e.i18n("buttons.copy","Copy")}}),void 0!==a.ext.buttons.colvis&&(e.extend(a.ext.buttons.colvis,{text:function(e){return'<i class="fa fa-eye"></i> '+e.i18n("buttons.colvis","Column visibility")}}),e.extend(a.ext.buttons.columnVisibility,{_columnText:function(e,t){var a=e.column(t.columns).index(),n=e.settings()[0].aoColumns[a].titleAttr||e.settings()[0].aoColumns[a].sTitle;return n||(n=e.column(a).header().innerHTML),n=n.replace(/\n/g," ").replace(/<br\s*\/?>/gi," ").replace(/<select(.*?)<\/select>/g,"").replace(/<!\-\-.*?\-\->/g,"").replace(/<.*?>/g,"").replace(/^\s+|\s+$/g,""),t.columnText?t.columnText(e,a,n):n}}));var r=function(){function a(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),this.init(),this.handleActionsRow(),this.handleActionsExport()}var n,o,c;return n=a,(o=[{key:"init",value:function(){e(document).on("change",".table-check-all",(function(t){var a=e(t.currentTarget),n=a.attr("data-set"),o=a.prop("checked");e(n).each((function(t,a){o?e(a).prop("checked",!0).trigger("change"):e(a).prop("checked",!1).trigger("change")}))})),e(document).find(".table-check-all").closest("th").removeAttr("title"),e(document).on("change",".checkboxes",(function(t){var a=e(t.currentTarget),n=a.closest(".table-wrapper").find(".table").prop("id"),o=a.closest(".table-wrapper").find(".table-check-all"),c=[],r=e("#"+n);r.find(".checkboxes:checked").each((function(t,a){c[t]=e(a).val()}));var l=a.closest("tr");a.prop("checked")?l.addClass("selected"):l.removeClass("selected"),c.length!==r.find(".checkboxes").length?(o.prop("checked",!1),c.length>0?o.prop("indeterminate",!0):o.prop("indeterminate",!1)):(o.prop("checked",!0),o.prop("indeterminate",!1))})),e(document).on("click",".btn-show-table-options",(function(t){t.preventDefault(),e(t.currentTarget).closest(".table-wrapper").find(".table-configuration-wrap").slideToggle(500)})),e(document).on("click",".action-item",(function(t){t.preventDefault();var a=e(t.currentTarget).find("span[data-href]"),n=a.data("action"),o=a.data("href");n&&"#"!==o&&(window.location.href=o)}))}},{key:"handleActionsRow",value:function(){var t=this,a=this;e(document).on("click",".deleteDialog",(function(t){t.preventDefault();var a=e(t.currentTarget);e(".delete-crud-entry").data("section",a.data("section")).data("parent-table",a.closest(".table").prop("id")),e(".modal-confirm-delete").modal("show")})),e(".delete-crud-entry").on("click",(function(t){t.preventDefault();var a=e(t.currentTarget);a.addClass("button-loading");var n=a.data("section");$httpClient.make().delete(n).then((function(t){var o=t.data;window.LaravelDataTables[a.data("parent-table")].row(e('a[data-section="'+n+'"]').closest("tr")).remove().draw(),Tec.showSuccess(o.message),a.closest(".modal").modal("hide")})).finally((function(){a.removeClass("button-loading")}))})),e(document).on("click",".delete-many-entry-trigger",(function(t){t.preventDefault();var a=e(t.currentTarget),n=a.closest(".table-wrapper").find(".table").prop("id"),o=[];if(e("#"+n).find(".checkboxes:checked").each((function(t,a){o[t]=e(a).val()})),0===o.length)return Tec.showError(TecVariables.languages.tables.please_select_record?TecVariables.languages.tables.please_select_record:"Please select at least one record to perform this action!"),!1;e(".delete-many-entry-button").data("href",a.prop("href")).data("parent-table",n).data("class-item",a.data("class-item")),e(".delete-many-modal").modal("show")})),e(".delete-many-entry-button").on("click",(function(t){t.preventDefault();var a=e(t.currentTarget);a.addClass("button-loading");var n=e("#"+a.data("parent-table")),o=[];n.find(".checkboxes:checked").each((function(t,a){o[t]=e(a).val()})),$httpClient.make().delete(a.data("href"),{ids:o,class:a.data("class-item")}).then((function(e){var t=e.data;Tec.showSuccess(t.message),n.find(".table-check-all").prop("checked",!1).prop("indeterminate",!1),window.LaravelDataTables[a.data("parent-table")].draw(),a.closest(".modal").modal("hide")})).finally((function(){a.removeClass("button-loading")}))})),e(document).on("click","[data-trigger-bulk-action]",(function(t){t.preventDefault();var a=e(t.currentTarget),n=a.closest(".table-wrapper").find(".table").prop("id"),o=[];if(e("#".concat(n)).find(".checkboxes:checked").each((function(t,a){return o.push(e(a).val())})),0===o.length)return Tec.showError(TecVariables.languages.tables.please_select_record?TecVariables.languages.tables.please_select_record:"Please select at least one record to perform this action!"),!1;e(".confirm-trigger-bulk-actions-button").data("href",a.prop("href")).data("method",a.data("method")).data("table-id",n).data("table-target",a.data("table-target")).data("target",a.data("target"));var c=e(".bulk-action-confirm-modal");c.find(".modal-title > strong").text(a.data("confirmation-modal-title")),c.find(".modal-body > div").text(a.data("confirmation-modal-message")),c.find("button.btn-warning").text(a.data("confirmation-modal-cancel-button")),c.find("button.confirm-trigger-bulk-actions-button").text(a.data("confirmation-modal-button")),c.modal("show")})),e(document).on("click",".confirm-trigger-bulk-actions-button",(function(t){t.preventDefault();var a=e(t.currentTarget);a.addClass("button-loading");var n=a.data("table-id"),o=a.data("method").toLowerCase()||"post",c=e("#".concat(n)),r=[];c.find(".checkboxes:checked").each((function(t,a){return r.push(e(a).val())})),$httpClient.make()[o](a.data("href"),{ids:r,bulk_action:1,bulk_action_table:a.data("table-target"),bulk_action_target:a.data("target")}).then((function(e){var t=e.data;Tec.showSuccess(t.message),c.find(".table-check-all").prop("checked",!1).prop("indeterminate",!1),window.LaravelDataTables[n].draw(),a.closest(".modal").modal("hide")})).finally((function(){a.removeClass("button-loading")}))})),e(document).on("click","[data-dt-single-action]",(function(t){t.preventDefault();var a=e(t.currentTarget),o=a.closest(".table-wrapper").find(".table").prop("id");if(a.data("confirmation-modal")){e(".confirm-trigger-single-action-button").data("href",a.prop("href")).data("method",a.data("method")).data("table-id",o);var c=e(".single-action-confirm-modal");c.find(".modal-title > strong").text(a.data("confirmation-modal-title")),c.find(".modal-body > div").text(a.data("confirmation-modal-message")),c.find("button.btn-warning").text(a.data("confirmation-modal-cancel-button")),c.find("button.confirm-trigger-single-action-button").text(a.data("confirmation-modal-button")),c.modal("show")}else n(o,a.prop("href"),a.data("method"))})),e(document).on("click",".confirm-trigger-single-action-button",(function(t){t.preventDefault();var a=e(t.currentTarget);a.addClass("button-loading"),n(a.data("table-id"),a.data("href"),a.data("method"),(function(){a.closest(".modal").modal("hide"),a.removeClass("button-loading")}),(function(){a.removeClass("button-loading")}))}));var n=function(a,n,o,c,r){var l=e("#".concat(a)),i=o.toLowerCase()||"post";$httpClient.make()[i](n).then((function(e){var n=e.data;Tec.showSuccess(n.message),l.find(".table-check-all").prop("checked",!1).prop("indeterminate",!1),window.LaravelDataTables[a].draw(),"function"==typeof c&&c.apply(t,n)})).catch((function(e){"function"==typeof r&&r.apply(t,e)}))};e(document).on("click",".bulk-change-item",(function(t){t.preventDefault();var n=e(t.currentTarget),o=n.closest(".table-wrapper").find(".table").prop("id"),c=[];if(e("#"+o).find(".checkboxes:checked").each((function(t,a){c[t]=e(a).val()})),0===c.length)return Tec.showError(TecVariables.languages.tables.please_select_record?TecVariables.languages.tables.please_select_record:"Please select at least one record to perform this action!"),!1;a.loadBulkChangeData(n),e(".confirm-bulk-change-button").data("parent-table",o).data("class-item",n.data("class-item")).data("key",n.data("key")).data("url",n.data("save-url")),e(".modal-bulk-change-items").modal("show")})),e(document).on("click",".confirm-bulk-change-button",(function(t){t.preventDefault();var a=e(t.currentTarget),n=a.closest(".modal").find(".input-value").val(),o=a.data("key"),c=e("#"+a.data("parent-table")),r=[];c.find(".checkboxes:checked").each((function(t,a){r[t]=e(a).val()})),a.addClass("button-loading"),$httpClient.make().post(a.data("url"),{ids:r,key:o,value:n,class:a.data("class-item")}).then((function(t){var n=t.data;Tec.showSuccess(n.message),c.find(".table-check-all").prop("checked",!1).prop("indeterminate",!1),e.each(r,(function(e,t){window.LaravelDataTables[a.data("parent-table")].row(c.find('.checkboxes[value="'+t+'"]').closest("tr")).remove().draw()})),a.closest(".modal").modal("hide")})).finally((function(){a.removeClass("button-loading")}))}))}},{key:"loadBulkChangeData",value:function(t){var a=e(".modal-bulk-change-items");$httpClient.make().get(a.find(".confirm-bulk-change-button").data("load-url"),{class:t.data("class-item"),key:t.data("key")}).then((function(t){var n=e.map(t.data.data,(function(e,t){return{id:t,name:e}}));e(".modal-bulk-change-content").html(t.data.html);var o=a.find("input[type=text].input-value");o.length&&(o.typeahead({source:n}),o.data("typeahead").source=n),Tec.initResources()}))}},{key:"handleActionsExport",value:function(){e(document).on("click",".export-data",(function(t){var a=e(t.currentTarget),n=a.closest(".table-wrapper").find(".table").prop("id"),o=[];e("#"+n).find(".checkboxes:checked").each((function(t,a){o[t]=e(a).val()})),t.preventDefault(),$httpClient.make().post(a.prop("href"),{"ids-checked":o}).then((function(e){var t=e.data,a=document.createElement("a");a.href=t.file,a.download=t.name,document.body.appendChild(a),a.trigger("click"),a.remove()}))}))}}])&&t(n.prototype,o),c&&t(n,c),Object.defineProperty(n,"prototype",{writable:!1}),a}();e(document).ready((function(){new r}))}(jQuery,jQuery.fn.dataTable)})();