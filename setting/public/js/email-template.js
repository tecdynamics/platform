$((function(){$('[data-bb-toggle="email-status-toggle"]').on("change",(function(e){var t=$(e.currentTarget),a=t.prop("name"),n=t.data("change-url");t.closest("tr").find("td.template-name > span").toggleClass("text-muted text-decoration-line-through"),$httpClient.make().post(n,{key:a,value:t.prop("checked")?1:0}).then((function(e){var t=e.data;return Tec.showSuccess(t.message)}))})),$(document).on("click",'[data-bb-toggle="reset-default"]',(function(e){e.preventDefault(),$("#reset-template-to-default-button").data("target",$(e.currentTarget).prop("href")),$("#reset-template-to-default-modal").modal("show")})),$(document).on("click",'[data-bb-toggle="twig-variable"]',(function(e){e.preventDefault();var t=$(e.currentTarget),a=$(".CodeMirror")[0].CodeMirror,n="{{ "+t.data("key")+" }}";if(a.somethingSelected())a.replaceSelection(n);else{var o=a.getCursor(),l={line:o.line,ch:o.ch};a.replaceRange(n,l)}})),$(document).on("click",'[data-bb-toggle="twig-function"]',(function(e){e.preventDefault();var t=$(e.currentTarget);t.closest(".twig-template").find(".CodeMirror");var a=t.closest(".twig-template").find(".CodeMirror")[0].CodeMirror,n=t.data("sample");if(a.somethingSelected())a.replaceSelection(n);else{var o=a.getCursor(),l={line:o.line,ch:o.ch};a.replaceRange(n,l)}})),$(document).on("click","#reset-template-to-default-button",(function(e){e.preventDefault();var t=$(e.currentTarget);Tec.showButtonLoading(t),$httpClient.make().post(t.data("target"),{email_subject_key:$("input[name=email_subject_key]").val(),module:$("input[name=module]").val(),template_file:$("input[name=template_file]").val()}).then((function(e){var t=e.data;Tec.showSuccess(t.message),setTimeout((function(){window.location.reload()}),1e3),$("#reset-template-to-default-modal").modal("hide")})).finally((function(){Tec.hideButtonLoading(t)}))}))}));